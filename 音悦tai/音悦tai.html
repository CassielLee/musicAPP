<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,initial-scale=1.0,user-scalable=no,minimum-scale = 1.0,maximum-scale=1.0"/>
  <title>音悦tai</title>
  <link href="css/yinyuetai.css" type="text/css" rel="stylesheet">
</head>
<body>
  <div id="wrap">
    <!--头部-->
    <div class="head">
      <div class="head-top">
        <!--logo-->
        <h1 class="logo">
          <a href="http://www.yinyuetai.com/">
            <img src="img/logo.png" alt="logo">
          </a>
        </h1>
        <!--面包屑导航-->
        <a href="javascript:;" class="menuBtn"></a>
        <!--按钮排-->
        <div class="btns">
          <a href="javascript:;" class="search"></a>
          <a href="javascript:;">登陆</a>
          <a href="javascript:;">注册</a>
        </div>
      </div>
      <div class="head-bottom">
        <form action="#" >
          <input type="text" placeholder="请输入搜索词" class="searchBox">
          <input type="submit" value="搜索" class="searchBig">
        </form>
      </div>
      <ul class="mask" style="display: none">
        <li><a href="#">首页</a></li>
        <li><a href="#">MV</a></li>
        <li><a href="#">悦单</a></li>
        <li><a href="#">V榜</a></li>
        <li><a href="#">音乐</a></li>
        <li><a href="#">商城</a></li>
        <li><a href="#">节目</a></li>
        <li><a href="#">饭团</a></li>
        <li><a href="#">咨询</a></li>
        <li><a href="#">个人中心</a></li>
        <li><a href="#">APP下载</a></li>
        <li><a href="#">热门应用</a></li>
      </ul>
    </div>
    <!--内容区域-->
    <div class="content">
      <div>
        <!--导航-->
        <div class="cl-drag-nav">
          <ul class="list">
            <li><a href="#" class="active">首页</a></li>
            <li><a href="#">MV</a></li>
            <li><a href="#">悦单</a></li>
            <li><a href="#">V榜</a></li>
            <li><a href="#">音乐</a></li>
            <li><a href="#">商城</a></li>
            <li><a href="#">节目</a></li>
            <li><a href="#">饭团</a></li>
            <li><a href="#">咨询</a></li>
            <li><a href="#">个人中心</a></li>
            <li><a href="#">APP下载</a></li>
            <li><a href="#">热门应用</a></li>
            <li><a href="#">MV</a></li>
            <li><a href="#">悦单</a></li>
            <li><a href="#">V榜</a></li>
            <li><a href="#">音乐</a></li>
            <li><a href="#">商城</a></li>
            <li><a href="#">节目</a></li>
            <li><a href="#">饭团</a></li>
            <li><a href="#">咨询</a></li>
            <li><a href="#">个人中心</a></li>
            <li><a href="#">APP下载</a></li>
            <li><a href="#">热门应用</a></li>
          </ul>
        </div>
        <!--无缝滑屏-->
        <div class="carousel-wrap" needCarousel needAuto>
          <div class="points-wrap"></div>
        </div>
        <!--tab选项卡-->
        <div class="tab-wrap">
          <div class="tab-head">
            <h3>MV首播</h3>
            <span>更多&gt</span>
          </div>
          <div class="tab-nav">
            <a href="javascript:;">全部</a>
            <a href="javascript:;">内地</a>
            <a href="javascript:;">港台</a>
            <a href="javascript:;">欧美</a>
            <a href="javascript:;">日韩</a>
            <a href="javascript:;">其他</a>
            <div class="smallG"></div>
          </div>
          <div class="tab-content">
            <ul class="tab-loading"></ul>
            <ul>
              <li>
                <a href="javascript:;">
                  <img src="img/a.jpg" alt="a">
                  <span>IDOL</span>
                </a>
                <div class="singer">
                  <span>防弹少年团</span>
                </div>
              </li>
              <li>
                <a href="javascript:;">
                  <img src="img/b.jpg" alt="b">
                  <span>センチメンタルトレイン</span>
                </a>
                <div class="singer">
                  <span>AKB48</span>
                </div>
              </li>
              <li>
                <a href="javascript:;">
                  <img src="img/c.jpg" alt="c">
                  <span>事与愿违(浮声六记LIVE版)</span>
                </a>
                <div class="singer">
                  <span>许靖韵</span>
                </div>
              </li>
              <li>
                <a href="javascript:;">
                  <img src="img/d.jpg" alt="d">
                  <span>最接近永恒的事情 官方版</span>
                </a>
                <div class="singer">
                  <span>邵雨薇</span>
                </div>
              </li>
              <li>
                <a href="javascript:;">
                  <img src="img/e.jpg" alt="e">
                  <span>いちばん好きな場所</span>
                </a>
                <div class="singer">
                  <span>シド(SID)</span>
                </div>
              </li>
              <li>
                <a href="javascript:;">
                  <img src="img/f.jpg" alt="f">
                  <span>Naughty Ball 官方版</span>
                </a>
                <div class="singer">
                  <span>娄艺潇</span>
                </div>
              </li>
            </ul>
            <ul class="tab-loading"></ul>
          </div>
        </div>
        <div class="tab-wrap">
          <div class="tab-head">
            <h3>MV首播</h3>
            <span>更多&gt</span>
          </div>
          <div class="tab-nav">
            <a href="javascript:;">全部</a>
            <a href="javascript:;">内地</a>
            <a href="javascript:;">港台</a>
            <a href="javascript:;">欧美</a>
            <a href="javascript:;">日韩</a>
            <a href="javascript:;">其他</a>
            <div class="smallG"></div>
          </div>
          <div class="tab-content">
            <ul class="tab-loading"></ul>
            <ul>
              <li>
                <a href="javascript:;">
                  <img src="img/a.jpg" alt="a">
                  <span>IDOL</span>
                </a>
                <div class="singer">
                  <span>防弹少年团</span>
                </div>
              </li>
              <li>
                <a href="javascript:;">
                  <img src="img/b.jpg" alt="b">
                  <span>センチメンタルトレイン</span>
                </a>
                <div class="singer">
                  <span>AKB48</span>
                </div>
              </li>
              <li>
                <a href="javascript:;">
                  <img src="img/c.jpg" alt="c">
                  <span>事与愿违(浮声六记LIVE版)</span>
                </a>
                <div class="singer">
                  <span>许靖韵</span>
                </div>
              </li>
              <li>
                <a href="javascript:;">
                  <img src="img/d.jpg" alt="d">
                  <span>最接近永恒的事情 官方版</span>
                </a>
                <div class="singer">
                  <span>邵雨薇</span>
                </div>
              </li>
              <li>
                <a href="javascript:;">
                  <img src="img/e.jpg" alt="e">
                  <span>いちばん好きな場所</span>
                </a>
                <div class="singer">
                  <span>シド(SID)</span>
                </div>
              </li>
              <li>
                <a href="javascript:;">
                  <img src="img/f.jpg" alt="f">
                  <span>Naughty Ball 官方版</span>
                </a>
                <div class="singer">
                  <span>娄艺潇</span>
                </div>
              </li>
            </ul>
            <ul class="tab-loading"></ul>
          </div>
        </div>
        <div class="tab-wrap">
          <div class="tab-head">
            <h3>MV首播</h3>
            <span>更多&gt</span>
          </div>
          <div class="tab-nav">
            <a href="javascript:;">全部</a>
            <a href="javascript:;">内地</a>
            <a href="javascript:;">港台</a>
            <a href="javascript:;">欧美</a>
            <a href="javascript:;">日韩</a>
            <a href="javascript:;">其他</a>
            <div class="smallG"></div>
          </div>
          <div class="tab-content">
            <ul class="tab-loading"></ul>
            <ul>
              <li>
                <a href="javascript:;">
                  <img src="img/a.jpg" alt="a">
                  <span>IDOL</span>
                </a>
                <div class="singer">
                  <span>防弹少年团</span>
                </div>
              </li>
              <li>
                <a href="javascript:;">
                  <img src="img/b.jpg" alt="b">
                  <span>センチメンタルトレイン</span>
                </a>
                <div class="singer">
                  <span>AKB48</span>
                </div>
              </li>
              <li>
                <a href="javascript:;">
                  <img src="img/c.jpg" alt="c">
                  <span>事与愿违(浮声六记LIVE版)</span>
                </a>
                <div class="singer">
                  <span>许靖韵</span>
                </div>
              </li>
              <li>
                <a href="javascript:;">
                  <img src="img/d.jpg" alt="d">
                  <span>最接近永恒的事情 官方版</span>
                </a>
                <div class="singer">
                  <span>邵雨薇</span>
                </div>
              </li>
              <li>
                <a href="javascript:;">
                  <img src="img/e.jpg" alt="e">
                  <span>いちばん好きな場所</span>
                </a>
                <div class="singer">
                  <span>シド(SID)</span>
                </div>
              </li>
              <li>
                <a href="javascript:;">
                  <img src="img/f.jpg" alt="f">
                  <span>Naughty Ball 官方版</span>
                </a>
                <div class="singer">
                  <span>娄艺潇</span>
                </div>
              </li>
            </ul>
            <ul class="tab-loading"></ul>
          </div>
        </div>
        <div class="tab-wrap">
          <div class="tab-head">
            <h3>MV首播</h3>
            <span>更多&gt</span>
          </div>
          <div class="tab-nav">
            <a href="javascript:;">全部</a>
            <a href="javascript:;">内地</a>
            <a href="javascript:;">港台</a>
            <a href="javascript:;">欧美</a>
            <a href="javascript:;">日韩</a>
            <a href="javascript:;">其他</a>
            <div class="smallG"></div>
          </div>
          <div class="tab-content">
            <ul class="tab-loading"></ul>
            <ul>
              <li>
                <a href="javascript:;">
                  <img src="img/a.jpg" alt="a">
                  <span>IDOL</span>
                </a>
                <div class="singer">
                  <span>防弹少年团</span>
                </div>
              </li>
              <li>
                <a href="javascript:;">
                  <img src="img/b.jpg" alt="b">
                  <span>センチメンタルトレイン</span>
                </a>
                <div class="singer">
                  <span>AKB48</span>
                </div>
              </li>
              <li>
                <a href="javascript:;">
                  <img src="img/c.jpg" alt="c">
                  <span>事与愿违(浮声六记LIVE版)</span>
                </a>
                <div class="singer">
                  <span>许靖韵</span>
                </div>
              </li>
              <li>
                <a href="javascript:;">
                  <img src="img/d.jpg" alt="d">
                  <span>最接近永恒的事情 官方版</span>
                </a>
                <div class="singer">
                  <span>邵雨薇</span>
                </div>
              </li>
              <li>
                <a href="javascript:;">
                  <img src="img/e.jpg" alt="e">
                  <span>いちばん好きな場所</span>
                </a>
                <div class="singer">
                  <span>シド(SID)</span>
                </div>
              </li>
              <li>
                <a href="javascript:;">
                  <img src="img/f.jpg" alt="f">
                  <span>Naughty Ball 官方版</span>
                </a>
                <div class="singer">
                  <span>娄艺潇</span>
                </div>
              </li>
            </ul>
            <ul class="tab-loading"></ul>
          </div>
        </div>
        <div class="tab-wrap">
          <div class="tab-head">
            <h3>MV首播</h3>
            <span>更多&gt</span>
          </div>
          <div class="tab-nav">
            <a href="javascript:;">全部</a>
            <a href="javascript:;">内地</a>
            <a href="javascript:;">港台</a>
            <a href="javascript:;">欧美</a>
            <a href="javascript:;">日韩</a>
            <a href="javascript:;">其他</a>
            <div class="smallG"></div>
          </div>
          <div class="tab-content">
            <ul class="tab-loading"></ul>
            <ul>
              <li>
                <a href="javascript:;">
                  <img src="img/a.jpg" alt="a">
                  <span>IDOL</span>
                </a>
                <div class="singer">
                  <span>防弹少年团</span>
                </div>
              </li>
              <li>
                <a href="javascript:;">
                  <img src="img/b.jpg" alt="b">
                  <span>センチメンタルトレイン</span>
                </a>
                <div class="singer">
                  <span>AKB48</span>
                </div>
              </li>
              <li>
                <a href="javascript:;">
                  <img src="img/c.jpg" alt="c">
                  <span>事与愿违(浮声六记LIVE版)</span>
                </a>
                <div class="singer">
                  <span>许靖韵</span>
                </div>
              </li>
              <li>
                <a href="javascript:;">
                  <img src="img/d.jpg" alt="d">
                  <span>最接近永恒的事情 官方版</span>
                </a>
                <div class="singer">
                  <span>邵雨薇</span>
                </div>
              </li>
              <li>
                <a href="javascript:;">
                  <img src="img/e.jpg" alt="e">
                  <span>いちばん好きな場所</span>
                </a>
                <div class="singer">
                  <span>シド(SID)</span>
                </div>
              </li>
              <li>
                <a href="javascript:;">
                  <img src="img/f.jpg" alt="f">
                  <span>Naughty Ball 官方版</span>
                </a>
                <div class="singer">
                  <span>娄艺潇</span>
                </div>
              </li>
            </ul>
            <ul class="tab-loading"></ul>
          </div>
        </div>
        <div class="tab-wrap">
          <div class="tab-head">
            <h3>MV首播</h3>
            <span>更多&gt</span>
          </div>
          <div class="tab-nav">
            <a href="javascript:;">全部</a>
            <a href="javascript:;">内地</a>
            <a href="javascript:;">港台</a>
            <a href="javascript:;">欧美</a>
            <a href="javascript:;">日韩</a>
            <a href="javascript:;">其他</a>
            <div class="smallG"></div>
          </div>
          <div class="tab-content">
            <ul class="tab-loading"></ul>
            <ul>
              <li>
                <a href="javascript:;">
                  <img src="img/a.jpg" alt="a">
                  <span>IDOL</span>
                </a>
                <div class="singer">
                  <span>防弹少年团</span>
                </div>
              </li>
              <li>
                <a href="javascript:;">
                  <img src="img/b.jpg" alt="b">
                  <span>センチメンタルトレイン</span>
                </a>
                <div class="singer">
                  <span>AKB48</span>
                </div>
              </li>
              <li>
                <a href="javascript:;">
                  <img src="img/c.jpg" alt="c">
                  <span>事与愿违(浮声六记LIVE版)</span>
                </a>
                <div class="singer">
                  <span>许靖韵</span>
                </div>
              </li>
              <li>
                <a href="javascript:;">
                  <img src="img/d.jpg" alt="d">
                  <span>最接近永恒的事情 官方版</span>
                </a>
                <div class="singer">
                  <span>邵雨薇</span>
                </div>
              </li>
              <li>
                <a href="javascript:;">
                  <img src="img/e.jpg" alt="e">
                  <span>いちばん好きな場所</span>
                </a>
                <div class="singer">
                  <span>シド(SID)</span>
                </div>
              </li>
              <li>
                <a href="javascript:;">
                  <img src="img/f.jpg" alt="f">
                  <span>Naughty Ball 官方版</span>
                </a>
                <div class="singer">
                  <span>娄艺潇</span>
                </div>
              </li>
            </ul>
            <ul class="tab-loading"></ul>
          </div>
        </div>
      </div>
    </div>
    <div class="scrollBar"></div>
  </div>
</body>
<script type="text/javascript" src="js/tools.js"></script>
<script type="text/javascript" src="js/cl.js"></script>
<script type="text/javascript">
  window.onload = function (){
    // 禁止移动端事件的行为
    document.addEventListener('touchstart',function (ev) {
      ev = ev || event;
      ev.preventDefault();
    })
    // 适配方案rem适配
    ;(function () {
      var styleNode = document.createElement('style');
      var w = document.documentElement.clientWidth/16;
      styleNode.innerHTML = "html{font-size:"+ w +"px!important}";
      document.head.appendChild(styleNode)
    })()

    // 头部效果
    //头部效果
    var aNodes = document.querySelectorAll("#wrap .head .head-top .btns a");
    var headBottom = document.querySelector("#wrap .head .head-bottom");
    var bar = document.querySelector("#wrap .scrollBar");
    var head = document.querySelector("#wrap .head");
    var h = head.offsetHeight;
    var flag = true;
    aNodes[0].addEventListener("touchend",function(){
      //滚动条滚过头部高度时
      if(cl.css(bar,"translateY")>h){

        if(flag){
          headBottom.style.display="none";
        }else{
          headBottom.style.display="block";
        }
        flag=!flag;
      }
    })

    // tab选项卡
    tab();
    function tab(){
      var  wrap = document.querySelector("#wrap .content .tab-wrap");
      var  contentNodes = document.querySelectorAll("#wrap .content .tab-wrap .tab-content");
      //var  loadings =  document.querySelectorAll("#wrap .content .tab-wrap .tab-content .tab-loading");
      var w = wrap.offsetWidth;
      for(var i=0;i<contentNodes.length;i++){
        move(contentNodes[i]);
      }


      function move(content){
        //抽象小绿的下标
        var  now = 0;
        var  smallG = content.parentNode.querySelector(".tab-nav .smallG");
        var  aNodes = content.parentNode.querySelectorAll(".tab-nav a");
        var  loadings =  content.querySelectorAll(".tab-loading");
        cl.css(content,"translateX",-w);
        // 确定小绿的宽度
        smallG.style.width=aNodes[0].offsetWidth+"px";
        //滑屏逻辑 content既是滑屏区域又是滑屏元素

        //var startPoint={x:0,y:0};
        var startPoint={};
        var elementPoint={x:0,y:0};
        var isX = true;
        var isFirst = true;


        //在1/2 跳转时  让整个jump逻辑干干净净的只触发一次
        var isOver =false;
        content.addEventListener("touchstart",function(ev){
          //isOver =false;


          if(isOver){
            return;
          }
          ev = ev||event;
          var touchC = ev.changedTouches[0];
          //快照
          //startPoint = {clientX:touchC.clientX,clientY:touchC.clientY};
          startPoint = touchC;
          elementPoint.x=cl.css(content,"translateX");
          elementPoint.y=cl.css(content,"translateY");

          isX = true;
          isFirst = true;


          content.style.transition = "none";
        })
        content.addEventListener("touchmove",function(ev){
          if(isOver){
            return;
          }
          if(!isX){
            return;
          }

          ev = ev||event;
          var touchC = ev.changedTouches[0];

          var nowPoint={};
          var dis ={x:0,y:0};
          nowPoint= touchC;
          dis.x = nowPoint.clientX - startPoint.clientX ;//0
          dis.y = nowPoint.clientY - startPoint.clientY ;//0

          if(isFirst){
            isFirst = false;
            if(Math.abs(dis.y) > Math.abs(dis.x)){
              isX = false;
              return;
            }
          }

          var translateX = elementPoint.x + dis.x;
          cl.css(content,"translateX",translateX);


          jump(dis.x);
        })
        content.addEventListener("touchend",function(ev){
          if(isOver){
            return;
          }
          ev = ev||event;
          var touchC = ev.changedTouches[0];
          var nowPoint={};
          var dis ={x:0,y:0};
          nowPoint= touchC;
          dis.x = nowPoint.clientX - startPoint.clientX ;

          if( Math.abs(dis.x) <= w/2 ){
            content.style.transition = "1s transform";
            cl.css(content,"translateX",-w);
          }
        })

        //1/2 跳转  ---> 请求
        function jump(disX){
          if(isOver){
            return;
          }
          if( Math.abs(disX) >w/2 ){
            isOver=true;
            content.style.transition = "1s transform";
            var targetX = disX>0?0:-2*w;
            cl.css(content,"translateX",targetX);

            //请求一定要在动画执行完毕之后再发,
            content.addEventListener("transitionend",endFn);
            content.addEventListener("webkitTransitionEnd",endFn);

            function endFn(){
              /*
               循环定时器   				回调函数的头部第一行清定时器
              DOM2 绑定 transitionend事件    回调函数的头部第一行解绑事件
              */
              content.removeEventListener("transitionend",endFn);
              content.removeEventListener("webkitTransitionEnd",endFn);
              content.style.transition = "none";
              /*超过 1/2
               * 1.一开始loading图是隐藏的,loading图需要出现（ 1/2跳转后  请求发送前）
               * 2.发送请求  处理请求  完成数据的渲染
               * 		必须动画（content去0 或者 -2w位置）完成之后，再去进行这一系列的逻辑
               * 								----   content要回到-w的位置
               * */
              for(var i=0;i<loadings.length;i++){
                loadings[i].style.opacity = 1;
              }

              //对now进行控制
              //往右滑 --   往左滑++
              disX>0?now--:now++;
              if(now<0){
                now = aNodes.length-1;
              }else if(now>aNodes.length-1){
                now = 0;
              }
              cl.css(smallG,"translateX",aNodes[now].offsetLeft);
              if(aNodes[now].offsetWidth != smallG.offsetWidth){
                smallG.style.width = aNodes[now].offsetWidth;
              }
              //发ajax请求  去服务端拿数据（学完node之后来发一发）
              //优雅
              setTimeout(function(){
                //成功  content要回到-w的位置  loading图隐藏

                for(var i=0;i<loadings.length;i++){
                  loadings[i].style.opacity = 0;
                }
                cl.css(content,"translateX",-w);

                //最后一步
                isOver =false;
              },2000)


            }
          }
        }
      }
    }

    // 竖向滑屏
    slideV()
    function slideV() {
      var content = document.querySelector('#wrap .content')
      var slideC = document.querySelector('#wrap .content > div')
      var head = document.querySelector('#wrap .head')
      var headBottom = document.querySelector('#wrap .head .head-bottom')
      var h = head.offsetHeight;

      /*
      * start的逻辑在竖向滑屏一开始时触发
      * move的逻辑在竖向滑屏过程中持续触发
      * end逻辑在竖向滑屏结束时触发
      */
      // 滚动条的高度/视口的高度= 视口的高度/竖向滑屏内容区的高度
      var bar = document.querySelector('#wrap .scrollBar');
      // scale = 视口的高度/（内容区+头部的高度）
      var scale = document.documentElement.clientHeight / (slideC.offsetHeight + head.offsetHeight);
      bar.style.height = document.documentElement.clientHeight * scale + 'px';
      var callBack = {
        start:function () {
          bar.style.opacity = 1;
        },
        move:function () {
          // 内容滚动的实时距离/内容能滚动的最大距离 = 滚动条滚动的实时距离/滚动条能滚动的最大距离
          var scaleS = cl.css(this,"translateY")/(slideC.offsetHeight - content.offsetHeight);
          cl.css(bar,"translateY",-scaleS*(document.documentElement.offsetHeight-bar.offsetHeight));
          if(cl.css(bar,"translateY")>h){
            headBottom.style.display="none";
            flag = false;
          }else if(cl.css(bar,"translateY")<h){
            headBottom.style.display="block";
            flag = true;
          }
        },
        end:function () {
          bar.style.opacity = 0;
        }
      }


      cl.slideScreenV(content,callBack);
    }

    // 导航的点击变色
    changeColor()
    /* 低级版本
    function changeColor() {
      var liNodes = document.querySelectorAll("#wrap .content .cl-drag-nav .list > li");
      for (var i = 0; i < liNodes.length; i++) {
        // 解决滑动误触,设置一个属性用于记录手指是否滑动
        liNodes[i].addEventListener('touchstart',function () {
          this.isMoved = false;
        })
        liNodes[i].addEventListener('touchmove',function () {
          this.isMoved = true;
        })

        // 点击变色逻辑
        liNodes[i].addEventListener('touchend',function () {
          // 当没有滑动的时候才能触发点击变色的逻辑
          if(!this.isMoved){
            for (var i = 0; i < liNodes.length; i++) {
              tools.removeClass(liNodes[i],'active');
            }
            tools.addClass(this,'active');
          }
        })
      }
    }*/
    function changeColor() {
      var list = document.querySelector("#wrap .content .cl-drag-nav .list");
      var aNodes = document.querySelectorAll("#wrap .content .cl-drag-nav .list > li a");
      // 事件冒泡
      list.addEventListener('touchstart',function () {
        this.isMoved = false;
      })
      list.addEventListener('touchmove',function () {
        this.isMoved = true;
      })
      list.addEventListener('touchend',function (ev) {
        if (this.isMoved){
          return;
        }
        ev = ev || event;
        var touchC = ev.changedTouches[0]
        for (var i = 0; i < aNodes.length; i++) {
          tools.removeClass(aNodes[i],'active')
        }
        /*if(touchC.target.nodeName.toUpperCase()==="A"){
          tools.addClass(touchC.target.parentNode,'active')
        }else if (touchC.target.nodeName.toUpperCase()==="LI"){
          tools.addClass(touchC.target,'active')
        }*/
        tools.addClass(touchC.target,'active');
      })
    }
    // 无缝滑屏
    swipper();
    function swipper() {
      var arr = ["img/01.jpg","img/02.jpg","img/03.jpg","img/04.jpg","img/05.jpg","img/06.jpg"];
      cl.carousel(arr);
    }
    // 拖拽,橡皮筋效果
    drag();
    function drag() {
      cl.dragNav()
    }
    // 全面阻止事件的默认行为之后，会让有些节点的默认事件无法触发
    // 失去获得焦点
    changeFocus()
    function changeFocus() {
      var inputText = document.querySelector('#wrap .head .head-bottom form input[type="text"]');
      inputText.addEventListener('touchstart',function (ev) {
        ev = ev || event;
        this.focus();
        ev.stopPropagation();
        ev.preventDefault();
      })
      document.addEventListener('touchstart',function () {
        inputText.blur();
      })
    }
    // 遮罩层功能代码
    CMCFmenuBtn();
    function CMCFmenuBtn() {
      var menuBtn = document.querySelector('#wrap .head .head-top > .menuBtn')
      var mask = document.querySelector('#wrap .head .mask')
      // 判断频道按钮
      // isShow: false X按钮
      // isShow: true 频道
      var isShow = true;
      menuBtn.addEventListener('touchstart',function (ev) {
        ev = ev || event;
        var touchC = ev.changedTouches[0];
        if(isShow){//
          //menuBtn.classList.add('active')
          tools.addClass(menuBtn,'active');
          mask.style.display = 'block'
        } else {
          tools.removeClass(menuBtn,'active');
          mask.style.display = 'none';
        }
        isShow = !isShow;
        // 阻止冒泡
        ev.stopPropagation();
        ev.preventDefault();
      })

      document.addEventListener('touchstart',function () {
        if(!isShow){
          tools.removeClass(menuBtn,'active');
          mask.style.display = 'none';
          isShow = !isShow;
        }
        //isShow = !isShow;
      })
      // 阻止冒泡，点击mask时，事件不应该冒泡到document上去
      mask.addEventListener('touchstart',function (ev) {
        ev = ev || event;
        ev.stopPropagation();
        ev.preventDefault();
      })
    }
  }
</script>
</html>